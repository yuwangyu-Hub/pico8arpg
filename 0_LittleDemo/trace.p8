pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

--lookat library
--andy c
function atan(x1, y1, x2, y2)
--finds the angle between x & y
    local x = x2 - x1
    local y = y2 - y1
    return atan2(x, y)
end

function distance(x1, y1, x2, y2)
    return sqrt((x2 - x1) ^ 2 + (y2 - y1) ^ 2)
end

function lookat(x1,y1,x2,y2)
--steps x toward y
    local x = cos(atan(x1,y1,x2,y2))
 local y = sin(atan(x1,y1,x2,y2))
 return x,y
end

--example
function _init()
 obj = {x=63,y=63}
 trgt = {x=rnd(127),y=rnd(127)}
end

function _update60()
    vx,vy = lookat(obj.x,obj.y,trgt.x,trgt.y)
    obj.x += vx
    obj.y += vy
    if abs(distance(obj.x,obj.y,trgt.x,trgt.y)) <= 1 then
        run()
    end
end

function _draw()
    cls()
    spr(1,obj.x,obj.y)
    spr(2,trgt.x,trgt.y)
end
__gfx__
0000000000dddd000066660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dccccd00688886000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700dccccccd6888888600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000dccccccd6888888600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000dccccccd6888888600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700dccccccd6888888600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dccccd00688886000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000dddd000066660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
